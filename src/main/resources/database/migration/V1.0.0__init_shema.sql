-- MySQL Script generated by MySQL Workbench
-- 02/10/17 09:44:56
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Table `UTILISATEUR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `UTILISATEUR` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NOM` VARCHAR(45) NULL,
  `PRENOM` VARCHAR(45) NULL,
  `EMAIL` VARCHAR(45) NULL,
  `LOGIN` VARCHAR(45) NOT NULL,
  `MOT_DE_PASSE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ROLE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ROLE` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `LIBELLE` VARCHAR(45) NOT NULL,
  `DESCRIPTION` VARCHAR(100) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `UTILISATEUR_ROLE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `UTILISATEUR_ROLE` (
  `UTILISATEUR_ID` INT NOT NULL,
  `ROLE_ID` INT NOT NULL,
  PRIMARY KEY (`UTILISATEUR_ID`, `ROLE_ID`),
  CONSTRAINT `fk_UTILISATEUR_has_ROLE_UTILISATEUR`
    FOREIGN KEY (`UTILISATEUR_ID`)
    REFERENCES `UTILISATEUR` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_UTILISATEUR_has_ROLE_ROLE1`
    FOREIGN KEY (`ROLE_ID`)
    REFERENCES `ROLE` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_UTILISATEUR_has_ROLE_ROLE1_idx` ON `UTILISATEUR_ROLE` (`ROLE_ID` ASC);

CREATE INDEX `fk_UTILISATEUR_has_ROLE_UTILISATEUR_idx` ON `UTILISATEUR_ROLE` (`UTILISATEUR_ID` ASC);


-- -----------------------------------------------------
-- Table `EXAM_TYPE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `EXAM_TYPE` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `LIBELLE` VARCHAR(45) NOT NULL,
  `DESCRIPTION` VARCHAR(100) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `EXAM`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `EXAM` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `LIBELLE` VARCHAR(45) NOT NULL,
  `STATUT` VARCHAR(45) NULL,
  `UTILISATEUR_ID` INT NOT NULL,
  `EXAM_TYPE_ID` INT NOT NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT `fk_EXAM_UTILISATEUR1`
    FOREIGN KEY (`UTILISATEUR_ID`)
    REFERENCES `UTILISATEUR` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EXAM_EXAM_TYPE1`
    FOREIGN KEY (`EXAM_TYPE_ID`)
    REFERENCES `EXAM_TYPE` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_EXAM_UTILISATEUR1_idx` ON `EXAM` (`UTILISATEUR_ID` ASC);

CREATE INDEX `fk_EXAM_EXAM_TYPE1_idx` ON `EXAM` (`EXAM_TYPE_ID` ASC);


-- -----------------------------------------------------
-- Table `QUESTION_TYPE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `QUESTION_TYPE` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `LIBELLE` VARCHAR(45) NOT NULL,
  `DESCRIPTION` VARCHAR(100) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QUESTION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `QUESTION` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `CONTENU` VARCHAR(45) NOT NULL,
  `NOTE` DOUBLE NULL,
  `UTILISATEUR_ID` INT NOT NULL,
  `QUESTION_TYPE_ID` INT NOT NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT `fk_QUESTION_UTILISATEUR1`
    FOREIGN KEY (`UTILISATEUR_ID`)
    REFERENCES `UTILISATEUR` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_QUESTION_QUESTION_TYPE1`
    FOREIGN KEY (`QUESTION_TYPE_ID`)
    REFERENCES `QUESTION_TYPE` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_QUESTION_UTILISATEUR1_idx` ON `QUESTION` (`UTILISATEUR_ID` ASC);

CREATE INDEX `fk_QUESTION_QUESTION_TYPE1_idx` ON `QUESTION` (`QUESTION_TYPE_ID` ASC);


-- -----------------------------------------------------
-- Table `EXAM_QUESTION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `EXAM_QUESTION` (
  `EXAM_ID` INT NOT NULL,
  `QUESTION_ID` INT NOT NULL,
  PRIMARY KEY (`EXAM_ID`, `QUESTION_ID`),
  CONSTRAINT `fk_EXAM_has_QUESTION_EXAM1`
    FOREIGN KEY (`EXAM_ID`)
    REFERENCES `EXAM` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EXAM_has_QUESTION_QUESTION1`
    FOREIGN KEY (`QUESTION_ID`)
    REFERENCES `QUESTION` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_EXAM_has_QUESTION_QUESTION1_idx` ON `EXAM_QUESTION` (`QUESTION_ID` ASC);

CREATE INDEX `fk_EXAM_has_QUESTION_EXAM1_idx` ON `EXAM_QUESTION` (`EXAM_ID` ASC);


-- -----------------------------------------------------
-- Table `QUESTION_CHOIX`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `QUESTION_CHOIX` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `CONTENU` VARCHAR(100) NULL,
  `CORRECTE` TINYINT(1) NULL,
  `QUESTION_ID` INT NOT NULL,
  PRIMARY KEY (`ID`),
  CONSTRAINT `fk_QUESTION_CHOIX_QUESTION1`
    FOREIGN KEY (`QUESTION_ID`)
    REFERENCES `QUESTION` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_QUESTION_CHOIX_QUESTION1_idx` ON `QUESTION_CHOIX` (`QUESTION_ID` ASC);


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
